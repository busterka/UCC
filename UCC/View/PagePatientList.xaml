<Page x:Class="UCC.View.PagePatientList"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Список пациентов"
      Background="{StaticResource BackgroundBrush}">

    <Grid Margin="30,20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Text="Список пациентов" 
                   Style="{StaticResource HeaderStyle}"
                   FontSize="24" 
                   Grid.Row="0" Margin="0,0,0,20"/>

        <!-- Поиск -->
        <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="0,0,0,20">
            <TextBox x:Name="TxtSearch" 
                     Style="{StaticResource CustomTextBox}"
                     Width="350" 
                     Height="40" 
                     FontSize="14"
                     TextChanged="TxtSearch_TextChanged"
                     Text="Поиск по ФИО..."/>
            <Button Content="Очистить" 
                    Style="{StaticResource RoundedButton}"
                    Width="100" 
                    Height="40"
                    FontSize="14"
                    Margin="15,0,0,0"
                    Click="BtnClearSearch_Click"/>
        </StackPanel>

        <!-- Список пациентов -->
        <Border Grid.Row="2" 
                Background="White" 
                BorderBrush="{StaticResource PrimaryBrush}" 
                BorderThickness="1" 
                CornerRadius="8" 
                Padding="5">
            <DataGrid x:Name="DgPatients" 
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      SelectionMode="Single"
                      CanUserAddRows="False"
                      SelectionChanged="DgPatients_SelectionChanged"
                      MouseDoubleClick="DgPatients_MouseDoubleClick"
                      FontFamily="{StaticResource ComfortaaFont}"
                      FontSize="14"
                      RowHeight="35">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" 
                                        Binding="{Binding PatientId}" 
                                        Width="70"
                                        FontWeight="Bold"/>
                    <DataGridTextColumn Header="ФИО" 
                                        Binding="{Binding FullName}" 
                                        Width="*"/>
                    <DataGridTextColumn Header="Дата рождения" 
                                        Binding="{Binding DateOfBirth, StringFormat=d}" 
                                        Width="130"/>
                    <DataGridTextColumn Header="Телефон" 
                                        Binding="{Binding Phone}" 
                                        Width="160"/>
                </DataGrid.Columns>
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Background" Value="White"/>
                        <Setter Property="BorderBrush" Value="Transparent"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>
                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="{StaticResource SecondaryBrush}"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="FontFamily" Value="{StaticResource ComfortaaFont}"/>
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Padding" Value="10,8"/>
                    </Style>
                </DataGrid.ColumnHeaderStyle>
            </DataGrid>
        </Border>

        <!-- Кнопки управления -->
        <StackPanel Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Grid.Row="3" 
                    Margin="0,25,0,0">
            <Button Content="Добавить" 
                    Style="{StaticResource RoundedButton}"
                    Width="110" 
                    Height="45"
                    FontSize="15"
                    Click="BtnAdd_Click"/>
            <Button x:Name="BtnEdit" 
                    Content="Редактировать" 
                    Style="{StaticResource RoundedButton}"
                    Width="130" 
                    Height="45"
                    FontSize="15"
                    Click="BtnEdit_Click" 
                    IsEnabled="False"/>
            <Button x:Name="BtnDelete" 
                    Content="Удалить" 
                    Style="{StaticResource RoundedButton}"
                    Width="110" 
                    Height="45"
                    FontSize="15"
                    Click="BtnDelete_Click" 
                    IsEnabled="False"/>
            <Button Content="Назад" 
                    Style="{StaticResource RoundedButton}"
                    Width="100" 
                    Height="45"
                    FontSize="15"
                    Click="BtnBack_Click"/>
        </StackPanel>
    </Grid>
</Page>